<div class="grid m-0 flex align-items-center">
  <div class="col-5">
    <app-search-input
      placeHolder="Curso"
      (onDebunce)="courseSuggestions($event)"
      [term]="termSearch"
    ></app-search-input>
    <div class="relative">
      <ul
        *ngIf="showSuggestion"
        class="suggestion absolute top-0 w-full z-5 px-3 pb-2 card-custom"
      >
        <li
          (click)="selectCourse(course)"
          class="mt-1"
          *ngFor="let course of courses"
        >
          {{ course.nombreCurso }}
        </li>
      </ul>
    </div>
  </div>
  <div class="col-5">
    <div class="p-inputgroup col-12 xl:col-6 mt-3 w-full">
      <span class="p-float-label w-full">
        <p-dropdown
          [style]="{
            minWidth: '100%',
            backgroundColor: '#f0f0f0',
            border: 'none',
            borderBottom: '1px solid rgba(0, 0, 0, 0.38)'
          }"
          inputId="topic-dropdown"
          [options]="topics"
          optionLabel="titulo"
          placeholder="Tipo de Identificación"
          [autoDisplayFirst]="false"
          [(ngModel)]="topic"
        ></p-dropdown>
        <label for="topic-dropdown"
          >Tema <span class="text-red-600">*</span></label
        >
      </span>
    </div>
  </div>
  <div class="col-2">
    <div class="flex justify-content-evenly">
      <button
        [disabled]="!course || !topic"
        class="mr-2"
        pButton
        type="button"
        label="Buscar"
        (click)="searchDelivery()"
      ></button>
      <button
        pButton
        pRipple
        type="button"
        label="Cancelar"
        class="p-button-danger"
        (click)="clearFilter()"
      ></button>
    </div>
  </div>
</div>

<div class="card-custom p-1 pb-5" *ngIf="homeworkStatus.length > 0">
  <h1 class="m-2">Cumplimiento:45%</h1>
  <app-header-title></app-header-title>
  <p-table
    [value]="homeworkStatus"
    styleClass="p-datatable-striped"
    responsiveLayout="scroll"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>N°</th>
        <th>Tarea</th>
        <th>Limite</th>
        <th>Estado</th>
        <th>Entrega</th>
        <th>Subir archivo</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-prueba>
      <tr>
        <td>{{ prueba.orden }}</td>
        <td>{{ prueba.titulo }}</td>
        <td>{{ prueba.fechaLimite }}</td>
        <td
          [ngClass]="{
            'por-vencer': prueba.estado === 'Por vencer',
            entregada: prueba.estado === 'Entregada',
            vencida: prueba.estado === 'Vencida',
            'sin-entregar': prueba.estado === 'Sin entregar',
            calificada: prueba.estado === 'Calificada'
          }"
        >
          {{ prueba.estado }}
        </td>
        <td>{{ prueba.fechaEntregado }}</td>
        <td>
          <div class="flex justify-content-center align-items-center">
            <div
              class="file-upload m-2"
              *ngIf="
                prueba.estado != 'Calificada' && prueba.estado != 'Vencida'
              "
            >
              <input
                type="file"
                (change)="onUpload($event)"
                class="p-1"
                id="upload"
                hidden
              />
              <label (click)="getDelivery(prueba)" for="upload"
                ><i class="pi pi-upload"></i
              ></label>
            </div>
            <i
              (click)="saveFile(prueba)"
              *ngIf="idDelivery == prueba.tareaID && file"
              class="pi pi-check m-2 save-file"
            ></i>

            <a *ngIf="prueba.urlarchivo" [href]="prueba.urlarchivo" download
              ><i class="pi pi-eye"></i
            ></a>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<app-loading *ngIf="showLoading"></app-loading>
